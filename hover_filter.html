<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Filter symbols using a dynamic expression</title>
    <meta
      name="viewport"
      content="initial-scale=1,maximum-scale=1,user-scalable=no"
    />
    <link
      href="https://api.mapbox.com/mapbox-gl-js/v3.0.0/mapbox-gl.css"
      rel="stylesheet"
    />
    <script src="https://api.mapbox.com/mapbox-gl-js/v3.0.0/mapbox-gl.js"></script>
    <style>
      body {
        margin: 0;
        padding: 0;
      }
      #map {
        position: absolute;
        top: 0;
        bottom: 0;
        width: 100%;
      }
    </style>
  </head>
  <body>
    <style>
      .filter-group {
        font: 15px/25px "Helvetica Neue", Arial, Helvetica, sans-serif;
        font-weight: 600;
        position: absolute;
        top: 10px;
        right: 10px;
        z-index: 1;
        border-radius: 3px;
        width: 120px;
        color: #fff;
      }

      .filter-group input[type="checkbox"]:first-child + label {
        border-radius: 3px 3px 0 0;
      }

      .filter-group label:last-child {
        border-radius: 0 0 3px 3px;
        border: none;
      }

      .filter-group input[type="checkbox"] {
        display: none;
      }

      .filter-group input[type="checkbox"] + label {
        background-color: #3386c0;
        display: block;
        cursor: pointer;
        padding: 10px;
        border-bottom: 1px solid rgba(0, 0, 0, 0.25);
      }

      .filter-group input[type="checkbox"] + label {
        background-color: #3386c0;
        text-transform: capitalize;
      }

      .filter-group input[type="checkbox"] + label:hover,
      .filter-group input[type="checkbox"]:checked + label {
        background-color: #4ea0da;
      }

      .filter-group input[type="checkbox"]:checked + label:before {
        content: "✔";
        margin-right: 5px;
      }
      mapboxgl-popup {
        max-width: 400px;
        font: 15px/25px "Helvetica Neue", Arial, Helvetica, sans-serif;
      }
    </style>
    <div id="map"></div>
    <nav id="filter-group" class="filter-group"></nav>

    <script>
      mapboxgl.accessToken =
        "pk.eyJ1IjoibXR0bm8xIiwiYSI6ImNscGNyeGl0cjB1OTEyam5rOG1tdmF3enAifQ.TRQ0vxWHwNV3emQborqVBA";
      
      const map = new mapboxgl.Map({
        container: "map",
        // Choose from Mapbox's core styles, or make your own style with Mapbox Studio
        style: "mapbox://styles/mapbox/streets-v12",
        center: [11.0821, 49.446],
        zoom: 12.5,
      });

      const places = {
        type: "FeatureCollection",
        features: [
          {
            type: "Feature",
            properties: {
              name: "Friedrich-Alexander-Universität Erlangen-Nürnberg (FAU)",
              category: "Universitäre und außeruniversitäre Forschung",
              type: "Volluniversität",
              location: {
                address: "Schloßplatz 4, 91054 Erlangen ",
              },
              services: [
                "Studienangebote",
                "Forschungsprojekte",
                "Innovationsförderung",
              ],
              targetGroup: ["Studierende", "Forschende", "Lehrende"],
              website: "https://www.fau.de/",
              features: [
                "Breites Studienangebot",
                "Starke Forschungstradition",
                "Kooperationen mit internationalen Forschungseinrichtungen",
              ],
              description:
                "<strong>FAU Erlangen</strong><p>Die Friedrich-Alexander-Universität Erlangen-Nürnberg ist eine der größten Forschungsuniversitäten in Deutschland. Sie bietet ein breites Spektrum an Studiengängen und zeichnet sich durch ihre starke Forschungstradition und internationale Kooperationen aus. Die Universität fördert Innovationen und überwindet dabei fachliche und geografische Grenzen.</p>",
            },
            geometry: {
              type: "Point",
              coordinates: [11.0045282, 49.5978721],
            },
          },
          {
            type: "Feature",
            properties: {
              name: "Friedrich-Alexander-Universität Erlangen-Nürnberg (FAU)",
              category: "Universitäre und außeruniversitäre Forschung",
              type: "Volluniversität",
              location: {
                address: "Lange Gasse 20 90403 Nürnberg",
              },
              services: [
                "Studienangebote",
                "Forschungsprojekte",
                "Innovationsförderung",
              ],
              targetGroup: ["Studierende", "Forschende", "Lehrende"],
              website: "https://www.fau.de/",
              features: [
                "Breites Studienangebot",
                "Starke Forschungstradition",
                "Kooperationen mit internationalen Forschungseinrichtungen",
              ],
              description:
                "Die Friedrich-Alexander-Universität Erlangen-Nürnberg ist eine der größten Forschungsuniversitäten in Deutschland. Sie bietet ein breites Spektrum an Studiengängen und zeichnet sich durch ihre starke Forschungstradition und internationale Kooperationen aus. Die Universität fördert Innovationen und überwindet dabei fachliche und geografische Grenzen.",
            },
            geometry: {
              type: "Point",
              coordinates: [11.0861796, 49.4581289],
            },
          },
          {
            type: "Feature",
            properties: {
              name: "Technische Hochschule Nürnberg",
              category: "Universitäre und außeruniversitäre Forschung",
              type: "Hochschule",
              location: {
                address: "Keßlerplatz 12, 90489 Nürnberg",
              },
              services: [
                "Studienangebote",
                "Weiterbildung",
                "Forschungsprojekte",
              ],
              targetGroup: [
                "Studieninteressierte",
                "Studierende",
                "Wissenschaftscommunity",
              ],
              website: "https://www.th-nuernberg.de/",
              features: [
                "Angebote für Schülerinnen und Schüler",
                "Internationale Sommerprogramme",
                "Innovative Lehrentwicklungsprojekte",
              ],
              description:
                "Die Technische Hochschule Nürnberg ist eine Bildungs- und Forschungseinrichtung, die ein vielfältiges Angebot an Studiengängen und Weiterbildungsmöglichkeiten bietet. Sie ist aktiv in der Forschung, insbesondere in Bereichen wie angewandter Informatik und Energiesysteme. Die Hochschule ist auch international ausgerichtet und bietet verschiedene Programme und Projekte an, die Innovation und interdisziplinäre Zusammenarbeit fördern.",
            },
            geometry: {
              type: "Point",
              coordinates: [11.0934692, 49.4522688],
            },
          },
          {
            type: "Feature",
            properties: {
              name: "Fraunhofer-Institut für Integrierte Schaltungen IIS",
              category: "Technologietransferzentrum",

              type: "Forschungsinstitut",
              location: {
                address: "Am Wolfsmantel 33, 91058 Erlangen",
              },
              services: [
                "Forschung und Entwicklung mikroelektronischer und informationstechnischer Systemlösungen",
                "Dienstleistungen für Industrie und öffentliche Hand",
              ],
              targetGroup: [
                "Industrie",
                "Öffentliche Hand",
                "Wissenschaftsgemeinschaft",
              ],
              website: "https://www.iis.fraunhofer.de/",
              features: [
                "Anwendungsorientierte Forschung",
                "Leitthemen: kognitive Sensorik und Audio- und Medientechnologien",
                "Innovationsprojekte und -dienstleistungen",
              ],
              description:
                "Das Fraunhofer IIS ist eine weltweit führende Forschungseinrichtung für mikroelektronische und informationstechnische Systemlösungen. Das Institut ist bekannt für seine anwendungsorientierte Forschung und bietet Dienstleistungen für Industrie und öffentliche Hand. Es fokussiert sich auf Bereiche wie kognitive Sensorik und Audio- und Medientechnologien.",
            },
            geometry: {
              type: "Point",
              coordinates: [11.01864, 49.5469201],
            },
          },
          {
            type: "Feature",
            properties: {
              name: "Nuremberg Campus of Technology",
              category: "Technologietransferzentrum",

              type: ["Forschungs- und Entwicklung", "Smart Cities"],
              location: {
                address: "Fürther Str. 246b, 90429 Nürnberg",
              },
              services: [
                "Forschung in Smart Cities Lösungen",
                "Automatisierungstechnik",
                "Energie- und Speichertechnologien",
                "Intelligente Verkehrsplanung",
              ],
              targetGroup: ["Forschende", "Studierende", "Industriepartner"],
              website:
                "https://www.th-nuernberg.de/einrichtungen-gesamt/wissenschaftliche-und-forschungskooperationen/nuremberg-campus-of-technology/",
              features: [
                "Smart City-Lösungen",
                "Nachhaltigkeitsorientiertes Innovations- und Transformationsmanagement",
                "Ambient Intelligence",
                "Wasserbau und Wasserressourcenmanagement",
              ],
              description:
                "Der Nuremberg Campus of Technology ist ein Think Tank für Smart City-Lösungen. Er fokussiert auf die Entwicklung neuer Konzepte in Automatisierungstechnik, Energie- und Speichertechnologien, intelligenter Verkehrsplanung und nachhaltigkeitsorientiertem Innovationsmanagement.",
            },
            geometry: {
              type: "Point",
              coordinates: [11.0299208, 49.4601525],
            },
          },
          {
            type: "Feature",
            properties: {
              name: "ADA Lovelace Center for Analytics, Data, Applications",
              category: "Technologietransferzentrum",
              type: [
                "Forschungs- und Entwicklungscenter",
                "angewandte Forschungs- und Entwicklung",
              ],
              location: {
                address: "Nordostpark 84, 90411 Nürnberg",
              },
              services: [
                "Forschung und Entwicklung in den Bereichen Analytics, Data, Applications",
                "Kooperationen mit Wissenschaft und Industrie",
              ],
              targetGroup: [
                "Industrie",
                "Forschungseinrichtungen",
                "Wissenschaftsgemeinschaft",
              ],
              website:
                "https://www.iis.fraunhofer.de/de/profil/zukunftsinitiativen/adacenter.html",
              features: [
                "Entwicklung von Modellen und Methoden für Datenanalyse",
                "Ausbildung von Nachwuchskräften",
                "Kooperation mit Universitäten und mittelständischer Wirtschaft",
              ],
              description:
                "Das ADA Lovelace Center, angesiedelt am Fraunhofer IIS, ist auf Forschung und Entwicklung in den Bereichen Analytics, Data und Applications spezialisiert. Es dient als Schnittstelle zwischen Wissenschaft und Industrie, um die Beherrschung von Daten und deren Analyse voranzutreiben. Das Center kooperiert eng mit Universitäten und der mittelständischen Wirtschaft.",
            },
            geometry: {
              type: "Point",
              coordinates: [11.1291229, 49.4870356],
            },
          },
          {
            type: "Feature",
            properties: {
              name: "Test- und Anwendungszentrum L.I.N.K.",
              category: "Technologietransferzentrum",
              type: [
                "Test- und Forschungszentrum",
                "angewandte Forschungs- und Entwicklung",
              ],
              location: {
                address: "Nordostpark 84, 90411 Nürnberg",
              },
              services: [
                "Entwicklung und Evaluierung zukunftsweisender Technologien",
                "Technologieberatung und Systemevaluation",
              ],
              targetGroup: [
                "Industrie",
                "Forschungseinrichtungen",
                "Unternehmen",
              ],
              website:
                "https://www.iis.fraunhofer.de/de/profil/standorte/linkhalle.html",
              features: [
                "Einzigartige Testinfrastruktur",
                "Umsetzung technologiebasierter Services",
                "Spezialisierung auf Lokalisierung und Identifikation",
              ],
              description:
                "Das Test- und Anwendungszentrum L.I.N.K. am Fraunhofer IIS in Nürnberg ist auf die Entwicklung und Evaluierung zukunftsweisender Technologien spezialisiert, insbesondere in den Bereichen Lokalisierung, Identifikation, Navigation und Kommunikation. Das Zentrum bietet eine einzigartige Testinfrastruktur und technologieorientierte Beratungsdienstleistungen für Unternehmen und Forschungseinrichtungen.",
            },
            geometry: {
              type: "Point",
              coordinates: [11.1291229, 49.4870356],
            },
          },
          {
            type: "Feature",
            properties: {
              name: "ESI-Anwendungszentrum",
              category: "Technologietransferzentrum",
              type: [
                "Forschungszentrum für eingebettete Systeme",
                "angewandte Forschungs- und Entwicklung",
                "Digitalisierung",
              ],
              location: {
                address: "Nordostpark 84, 90411 Nürnberg",
              },
              services: [
                "Forschung in eingebetteten Systemen für verschiedene Anwendungsbereiche",
                "Entwicklung von Technologien für Sport & Gesundheit, Fahrzeuge, Industrie 4.0",
              ],
              targetGroup: [
                "Industrie",
                "Forschungseinrichtungen",
                "Unternehmen",
              ],
              website: "https://www.esi-anwendungszentrum.de/",
              features: [
                "Anwendungsorientierte Forschungslabs",
                "Innovative Forschung für branchenorientierte Lösungen",
                "Eingebettete Systeme in verschiedenen Bereichen",
              ],
              description:
                "Das ESI-Anwendungszentrum fokussiert sich auf die Entwicklung und Forschung in eingebetteten Systemen. Es bietet anwendungsorientierte Forschung für branchenorientierte Lösungen, mit speziellen Labs für Sport & Gesundheit, Fahrzeugsensorik und Automatisierung im Kontext der Industrie 4.0.",
            },
            geometry: {
              type: "Point",
              coordinates: [11.1291229, 49.4870356],
            },
          },
          {
            type: "Feature",
            properties: {
              name: "ZOLLHOF – Tech Incubator",
              category: "Gründerzentrum",
              type: ["Gründerzentrum", "Digitalisierung", "Medizintechnik"],
              location: {
                address: "Zollhof 7, 90443 Nürnberg",
              },
              services: [
                "Bürovermietung",
                "Inkubationsprogramme",
                "Innovationsprogramme für Studenten",
                "Netzwerkveranstaltungen",
              ],
              targetGroup: ["Start-ups", "Studenten", "Unternehmensgründer"],
              website: "https://zollhof.de/",
              features: [
                "Unterstützung von Start-ups",
                "Innovationsförderung",
                "Zusammenarbeit mit Unternehmen",
              ],
              description:
                "Der ZOLLHOF – Tech Incubator ist eine Einrichtung, die sich auf die Unterstützung von Start-ups und Unternehmensgründern spezialisiert. Sie bieten Bürovermietung, Inkubations- und Innovationsprogramme an, die sich insbesondere an Start-ups und Studenten richten. Der ZOLLHOF fördert Innovation und Unternehmertum durch die Bereitstellung von Ressourcen und die Vernetzung mit der Wirtschaft.",
            },
            geometry: {
              type: "Point",
              coordinates: [11.06908, 49.44364],
            },
          },
          {
            type: "Feature",
            properties: {
              name: "Klee-Center GmbH Existenzgründerzentrum",
              category: "Gründerzentrum",
              type: "Existenzgründerzentrum",
              location: {
                address: "Kleestraße 21-23, 90461 Nürnberg",
              },
              services: [
                "Gründerberatung",
                "Bürovermietung",
                "Seminarraumvermietung",
              ],
              targetGroup: [
                "Existenzgründer",
                "Start-ups",
                "freiberuflich Tätige",
              ],
              website: "https://www.kleecenter.de/",
              features: [
                "Flexible Büroflächen mit repräsentativem Äußeren",
                "Zentrale Infrastruktur- und Serviceleistungen",
                "Netzwerk für Unternehmer und freiberuflich Tätige",
              ],
              description:
                "Das Klee-Center bietet Existenzgründern aus allen Branchen eine Plattform zum Start und Wachstum ihres Unternehmens. Es stellt attraktive und flexible Büroflächen, zentrale Infrastruktur- und Serviceleistungen sowie ein Netzwerk für Unternehmer und freiberuflich Tätige bereit.",
            },
            geometry: {
              type: "Point",
              coordinates: [11.0917115, 49.433829],
            },
          },
          {
            type: "Feature",
            properties: {
              name: "Innovationslabor Industrial IoT",
              category: "Open-Innovation und Co-Creation",
              type: ["Forschungs- und Entwicklungslabor", "Digitalisierung"],
              location: {
                address: "Nordostpark 84, 90411 Nürnberg",
              },
              services: [
                "Entwicklung, Erprobung und Testen von Lokalisierungs- und Kommunikationstechnologien",
                "Individuelle Lösungen und Prototypenentwicklung",
                "1.400 Quadratmeter Hallen- und Laborfläche für Indoor- und Outdooranwendungen",
              ],
              targetGroup: [
                "Industrie",
                "Unternehmen",
                "Forschungseinrichtungen",
              ],
              website:
                "https://www.iis.fraunhofer.de/de/ff/lv/Innovationslabor.html",
              features: [
                "Digitalisierung von Maschinenparks und Intralogistik",
                "Aufbau von Maschine-zu-Maschine-Kommunikation",
                "Testumgebung für Industrie 4.0-Anwendungen",
              ],
              description:
                "Das Innovationslabor Industrial IoT am Fraunhofer IIS bietet Unternehmen eine einzigartige Testumgebung für Industrie 4.0-Anwendungen. Das Labor ermöglicht die Entwicklung, Erprobung und das Testen von Lokalisierungs- und Kommunikationstechnologien und bietet eine umfassende Infrastruktur für die Digitalisierung von Industrieprozessen.",
            },
            geometry: {
              type: "Point",
              coordinates: [11.1291229, 49.4870356],
            },
          },
          {
            type: "Feature",
            properties: {
              name: "Urban Lab Nürnberg",
              category: "Open-Innovation und Co-Creation",
              type: [
                "Urbanes Experimentier- und Gestaltungslabor",
                "Makerspace",
              ],
              location: {
                address: "Frankenstraße 200, 90461 Nürnberg",
              },
              services: [
                "Forschung und Entwicklung urbaner Lösungen",
                "Partizipative und co-kreative Arbeitsweise",
                "Unterstützung und Prototyping für städtische Projekte",
              ],
              targetGroup: ["Stadtplaner", "Architekten", "Bürger"],
              website: "https://www.urbanlab-nuernberg.de/",
              features: [
                "Nachhaltige und grüne Stadtentwicklung",
                "Interdisziplinäre Zusammenarbeit",
                "Realisierung urbaner Utopien",
              ],
              description:
                "Das Urban Lab Nürnberg ist ein Labor für urbane Experimente und Gestaltung. Es ermöglicht Menschen, aktiv an der Gestaltung ihrer Stadt teilzunehmen. Mit einem Fokus auf Nachhaltigkeit und Interdisziplinarität, arbeitet das Urban Lab an Lösungen, um Städte grüner und lebenswerter zu machen.",
            },
            geometry: {
              type: "Point",
              coordinates: [11.0944973, 49.4301337],
            },
          },
          {
            type: "Feature",
            properties: {
              name: "LEONARDO – Zentrum für Kreativität und Innovation",
              category: "Open-Innovation und Co-Creation",
              type: [
                "Interdisziplinäres Kreativitäts- und Innovationszentrum",
                "Open Innovation",
              ],
              location: {
                address: "Karl-Grillenberger-Straße 3a, 90402 Nürnberg",
              },
              services: [
                "Förderung interdisziplinärer Zusammenarbeit",
                "Unterstützung innovativer Projektideen",
                "Veranstaltungen und Workshops",
              ],
              targetGroup: ["Hochschulen", "Kreative", "Innovatoren"],
              website: "https://leonardo-zentrum.de/",
              features: [
                "Zusammenarbeit von Hochschulen in Lehre, Forschung und Transfer",
                "Entwicklung und Realisierung von Ideen",
                "Interdisziplinäre und kreative Ansätze",
              ],
              description:
                "Das LEONARDO – Zentrum für Kreativität und Innovation in Nürnberg ist eine Kooperation zwischen verschiedenen Hochschulen und zielt darauf ab, die interdisziplinäre Zusammenarbeit in den Bereichen Lehre, Forschung und Transfer zu fördern. Es bietet eine Plattform für die Entwicklung und Realisierung kreativer und innovativer Ideen und veranstaltet verschiedene Workshops und Veranstaltungen zur Förderung dieser Ziele.",
            },
            geometry: {
              type: "Point",
              coordinates: [11.070027351379395, 49.45173263549805],
            },
          },
          {
            type: "Feature",
            properties: {
              name: "JOSEPHS - Das offene Innovationslabor",
              category: "Open-Innovation und Co-Creation",
              type: [
                "Innovations- und Kreativitätszentrum",
                "Open Innovation",
                "Co-Creation",
              ],
              location: {
                address: "Augustinerstraße 19, 90403 Nürnberg",
              },
              services: [
                "Erlebniswelt für Innovationen",
                "Co-Kreation und partizipative Entwicklung",
                "Veranstaltungen und Workshops",
              ],
              targetGroup: [
                "Zukunftsgestalter*innen",
                "Kreative",
                "Öffentlichkeit",
              ],
              website: "https://josephs-innovation.de/wp/",
              features: [
                "Entwicklung von Innovationsideen",
                "Einblick in die Welt der Innovation",
                "Interaktive und experimentelle Projekte",
              ],
              description:
                "Das JOSEPHS ist ein offenes Innovationslabor, das Menschen die Möglichkeit bietet, an der Entwicklung zukünftiger Innovationen teilzunehmen. Besucher können hier neue Ideen entdecken, ausprobieren und durch ihr Feedback mitgestalten. Das JOSEPHS verfolgt einen partizipativen und co-kreativen Ansatz und dient als Plattform für die gemeinsame Entwicklung von zukunftsweisenden Lösungen.",
            },
            geometry: {
              type: "Point",
              coordinates: [11.0747046, 49.4539821],
            },
          },
          {
            type: "Feature",
            properties: {
              name: "Bayern Innovativ - Innovation leben",
              category: "Cluster & Innovationsagentur",
              type: ["Innovations- und Förderagentur", "Cluster"],
              location: {
                address: "Am Tullnaupark 8, 90402 Nürnberg",
              },
              services: [
                "Netzwerke & Thinknet Bayern",
                "Technologie- & Wissenstransfer",
                "Fördermittelberatung & Projektträgerschaft",
                "Vermarktung & Kommunikation",
                "Innovationsdienstleistungen",
              ],
              targetGroup: [
                "KMU",
                "Start-ups",
                "Universitäten/Fachhochschulen",
                "Forschungsinstitute",
              ],
              website: "https://www.bayern-innovativ.de/de/startseite",
              features: [
                "Unterstützung von Innovationen und Technologietransfer",
                "Diverse Förderprogramme",
                "Interdisziplinäre Zusammenarbeit und Vernetzung",
              ],
              description:
                "Bayern Innovativ stellt als Cluster und Innovationsagentur dar, die sich auf die Förderung von Innovationen und den Technologietransfer in Bayern spezialisiert hat. Sie dient als Plattform für die Vernetzung verschiedener Akteure und bietet umfangreiche Dienstleistungen zur Unterstützung von Innovationsprozessen.",
            },
            geometry: {
              type: "Point",
              coordinates: [11.1021933, 49.4501261],
            },
          },
          {
            type: "Feature",
            properties: {
              name: "NIK e.V. | Netzwerk der Digitalwirtschaft",
              category: "Cluster & Innovationsagentur",
              type: [
                "Digitalwirtschaftsnetzwerk",
                "Cluster",
                "Digitalisierung",
              ],
              location: {
                address: "Obermaierstraße 7, 90408 Nürnberg",
              },
              services: [
                "Austausch und neue Kontakte",
                "Impulse und neue Ideen",
                "Informationen und neue Trends",
              ],
              targetGroup: [
                "Unternehmen",
                "Hochschulen",
                "Kommunen",
                "Institutionen",
              ],
              website: "https://www.nik-nbg.de/",
              features: [
                "Förderung der digitalen Transformation",
                "Arbeitsgruppen zu verschiedenen Themen",
                "Networking-Veranstaltungen",
              ],
              description:
                "Das NIK e.V. ist ein Netzwerk, das sich der Förderung der Digitalwirtschaft in der Region Nürnberg widmet. Es vernetzt Unternehmen, Hochschulen, Kommunen und Institutionen und unterstützt sie bei der digitalen Transformation durch Austausch, Impulse und Informationsbereitstellung.",
            },
            geometry: {
              type: "Point",
              coordinates: [11.073072, 49.4706025],
            },
          },
          {
            type: "Feature",
            properties: {
              name: "Automation Valley Nordbayern",
              category: "Cluster & Innovationsagentur",
              type: ["Produktionstechnik", "Cluster"],
              location: {
                address: "Hauptmarkt 25-27, 90403 Nürnberg",
              },
              services: [
                "Vernetzung von Unternehmen und wissenschaftlichen Einrichtungen",
                "Förderung von Industrie 4.0-Projekten",
                "Informationen zu aktuellen Entwicklungen und Veranstaltungen",
              ],
              targetGroup: [
                "Unternehmen",
                "Wissenschaftliche Einrichtungen",
                "Branchenakteure",
              ],
              website: "https://automation-valley.de/",
              features: [
                "Zusammenarbeit von ca. 300 Firmen und wissenschaftlichen Einrichtungen",
                "40.000 Mitarbeiter in der Branche in Nordbayern",
                "Regionale Meldungen und Informationen zu Industrie 4.0",
              ],
              description:
                "Automation Valley Nordbayern ist eine regionale Initiative, die sich auf die Industrie 4.0 konzentriert. Sie vernetzt etwa 300 Firmen und wissenschaftliche Einrichtungen in Nordbayern, die in diesem Sektor tätig sind. Das Netzwerk bietet eine Plattform für die Förderung von Projekten, den Austausch von Informationen und die Organisation von Veranstaltungen in der Region.",
            },
            geometry: {
              type: "Point",
              coordinates: [11.077364921569824, 49.45417022705078],
            },
          },
        ],
      };

      map.on("load", () => {
        // Add a GeoJSON source containing place coordinates and information.
        map.addSource("places", {
          type: "geojson",
          data: places,
        });
        /*
        // Add a symbol layer showing all features in the source
        map.addLayer({
            'id': 'symbol-places',
            'type': 'symbol',
            'source': 'places',
            'layout': {
                // These icons are a part of the Mapbox Light style.
                // To view all images available in a Mapbox style, open
                // the style in Mapbox Studio and click the "Images" tab.
                // To add a new image to the style at runtime see
                // https://docs.mapbox.com/mapbox-gl-js/example/add-image/
                'icon-image': ['get', 'icon'],
                'icon-allow-overlap': true
            }
        });
        */
        // Add a layer showing the places.
        map.addLayer({
          id: "places-circles",
          type: "circle",
          source: "places",
          paint: {
            // Use a 'match' expression to assign color based on the 'category' property
            "circle-color": [
              "match",
              ["get", "category"],
              "Technologietransferzentrum",
              "#4287f5", // Blue Technologietransferzentrum
              "Gründerzentrum",
              "#28a745", // Green for Food
              /* Add more [category, color] pairs here */
              "#ccc", // Default color if no category matches
            ],
            "circle-radius": 10,
          },
          layout: {
            "icon-image": ["get", "icon"],
            "icon-allow-overlap": true,
          },
        });
        /*   
    // Add a layer showing the names of the places.
        map.addLayer({
            'id': 'places-labels',
            'type': 'symbol',
            'source': 'places',
            'layout': {
                'text-field': ['get', 'name'], // Use the 'name' property from your data
                'text-size': 12,
                'text-offset': [0, 1.5] // Adjust text offset to avoid overlap with the circle
            },
            'paint': {
                'text-color': '#000000'
            }
        });
        */

        const filterGroup = document.getElementById("filter-group");

        // Apply the filter to layers
        const updateLayerFilter = () => {
          const checkedCategories = [
            ...document.querySelectorAll(
              '.filter-group input[type="checkbox"]:checked'
            ),
          ].map((el) => el.id);

          // Apply the filter to the layers
          if (checkedCategories.length > 0) {
            map.setFilter("places-circles", [
              "in",
              ["get", "category"],
              ["literal", checkedCategories],
            ]);
            map.setFilter("places-labels", [
              "in",
              ["get", "category"],
              ["literal", checkedCategories],
            ]);
          } else {
            // If no categories are selected, reset the filter (show all)
            map.setFilter("places-circles", null);
            map.setFilter("places-labels", null);
          }
        };

        // Get an array of all unique `category` properties
        const categories = Array.from(
          new Set(places.features.map((feature) => feature.properties.category))
        );

        // For each `category`, create a checkbox and label
        filterGroup.innerHTML = ""; // Clear existing content
        categories.forEach((category) => {
          const input = document.createElement("input");
          input.type = "checkbox";
          input.id = category;
          input.checked = true;
          filterGroup.appendChild(input);

          const label = document.createElement("label");
          label.setAttribute("for", category);
          label.textContent = category;
          filterGroup.appendChild(label);

          // When any checkbox changes, update the filter.
          input.addEventListener("change", updateLayerFilter);
        });


        //Display Popup

        // Create a popup, but don't add it to the map yet.
        const popup = new mapboxgl.Popup({
          closeButton: false,
          closeOnClick: false,
        });

        // When a click event occurs on a feature in the places layer, open a popup at the
        // location of the feature, with description HTML from its properties.
        map.on("click", "places-circles", (e) => {
          // Copy coordinates array.
          const coordinates = e.features[0].geometry.coordinates.slice();
          const description = e.features[0].properties.description;

          // Ensure that if the map is zoomed out such that multiple
          // copies of the feature are visible, the popup appears
          // over the copy being pointed to.
          while (Math.abs(e.lngLat.lng - coordinates[0]) > 180) {
            coordinates[0] += e.lngLat.lng > coordinates[0] ? 360 : -360;
          }

          new mapboxgl.Popup()
            .setLngLat(coordinates)
            .setHTML(description)
            .addTo(map);
        });

        // Change the cursor to a pointer when the mouse is over the places layer.
        map.on("mouseenter", "places-circles", () => {
          map.getCanvas().style.cursor = "pointer";
        });

        // Change it back to a pointer when it leaves.
        map.on("mouseleave", "places-circles", () => {
          map.getCanvas().style.cursor = "";
        });
      });
    </script>
  </body>
</html>
